<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<title>Лаба 12 — Event</title>
		<link rel="stylesheet" href="style.css" />
	</head>

	<body>
		<div class="card">
			<h1>Лабораторная работа №12 — Event</h1>

			<h3>12.1 Координаты мыши</h3>
			<p>Двигая мышку, смотри в форму — координаты обновляются.</p>

			<label>screenX:</label>
			<input type="text" id="screenX" readonly />

			<label>clientX:</label>
			<input type="text" id="clientX" readonly />

			<label>offsetX:</label>
			<input type="text" id="offsetX" readonly />

			<br /><br />

			<h3>12.2 и 12.3 Движение объектов за курсором</h3>
			<p>Объекты двигаются за курсором только внутри этой зоны:</p>

			<div id="playground">
				<div id="f1" class="follower"></div>
				<div id="f2" class="follower2"></div>
				<div id="f3" class="follower2" style="background: #5cff99"></div>
			</div>
		</div>

		<script>
			document.addEventListener('mousemove', e => {
				document.getElementById('screenX').value = e.screenX
				document.getElementById('clientX').value = e.clientX
				document.getElementById('offsetX').value = e.offsetX
			})

			const playground = document.getElementById('playground')

			const f1 = document.getElementById('f1')
			const f2 = document.getElementById('f2')
			const f3 = document.getElementById('f3')

			let targetX = 150,
				targetY = 150

			playground.addEventListener('mousemove', e => {
				const rect = playground.getBoundingClientRect()
				targetX = e.clientX - rect.left
				targetY = e.clientY - rect.top
			})

			function moveObjects() {
				const rect = playground.getBoundingClientRect()

				let r1 = f1.getBoundingClientRect()
				f1.style.left =
					r1.left - rect.left + (targetX - (r1.left - rect.left)) * 0.2 + 'px'
				f1.style.top =
					r1.top - rect.top + (targetY - (r1.top - rect.top)) * 0.2 + 'px'

				let r2 = f2.getBoundingClientRect()
				f2.style.left =
					r2.left - rect.left + (targetX - (r2.left - rect.left)) * 0.1 + 'px'
				f2.style.top =
					r2.top - rect.top + (targetY - (r2.top - rect.top)) * 0.1 + 'px'

				let r3 = f3.getBoundingClientRect()
				f3.style.left =
					r3.left - rect.left + (targetX - (r3.left - rect.left)) * 0.05 + 'px'
				f3.style.top =
					r3.top - rect.top + (targetY - (r3.top - rect.top)) * 0.05 + 'px'

				requestAnimationFrame(moveObjects)
			}

			moveObjects()
		</script>
	</body>
</html>
