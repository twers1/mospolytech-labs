<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<title>–õ–∞–±–∞ 13 ‚Äî –ü–∞–∑–ª—ã</title>
		<link rel="stylesheet" href="style.css" />
	</head>

	<body>
		<div class="card">
			<h1>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ13 ‚Äî –ü–∞–∑–ª—ã</h1>

			<p>
				–°–æ–±–µ—Ä–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–∑ 6 —á–∞—Å—Ç–µ–π. –ù–∞–∂–º–∏ –Ω–∞ –∫—É—Å–æ–∫ ‚Äî –æ–Ω –ø—Ä–∏–∫–ª–µ–∏—Ç—Å—è –∫ –º—ã—à–∏,
				–Ω–∞–∂–º–∏ —Å–Ω–æ–≤–∞ ‚Äî –æ—Ç–ø—É—Å—Ç–∏—Ç—Å—è.
			</p>

			<div id="puzzle-area"></div>

			<button class="btn-check" onclick="checkPuzzle()">
				–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É
			</button>
		</div>

		<script>
			const area = document.getElementById('puzzle-area')

			let pieces = []
			let grabbed = null


			function createPieces() {
				let index = 0
				const img = 'puzzle.jpg'

				for (let row = 0; row < 2; row++) {
					for (let col = 0; col < 3; col++) {
						let piece = document.createElement('div')
						piece.className = 'piece'

						piece.dataset.correctX = col * 200
						piece.dataset.correctY = row * 150

						piece.style.backgroundImage = `url(${img})`
						piece.style.backgroundPosition = `-${col * 200}px -${row * 150}px`

						piece.style.left = Math.random() * 400 + 'px'
						piece.style.top = Math.random() * 250 + 'px'

						piece.addEventListener('click', () => toggleGrab(piece))

						area.appendChild(piece)
						pieces.push(piece)

						index++
					}
				}
			}

			document.addEventListener('mousemove', e => {
				if (!grabbed) return

				const rect = area.getBoundingClientRect()
				grabbed.style.left = e.clientX - rect.left - 100 + 'px'
				grabbed.style.top = e.clientY - rect.top - 75 + 'px'
			})

			function toggleGrab(piece) {
				if (grabbed === piece) {
					grabbed = null
					piece.style.boxShadow = ''
				} else {
					grabbed = piece
					piece.style.boxShadow = '0 0 15px #ffcf5c'
				}
			}


			function checkPuzzle() {
				let correct = true

				pieces.forEach(p => {
					let x = parseInt(p.style.left)
					let y = parseInt(p.style.top)

					let cx = parseInt(p.dataset.correctX)
					let cy = parseInt(p.dataset.correctY)

					if (Math.abs(x - cx) > 20 || Math.abs(y - cy) > 20) {
						correct = false
					}
				})

				if (correct) alert('–û—Ç–ª–∏—á–Ω–æ! –ü–∞–∑–ª —Å–æ–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ üéâ')
				else alert('–ü–æ–∫–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë üòä')
			}

			createPieces()
		</script>
	</body>
</html>
